# ğŸ“Š Base de Datos Expandida de Rutas BusTrackSV

## ğŸ¯ Resumen

Este proyecto ahora incluye una base de datos **significativamente expandida** con datos reales del sistema de transporte pÃºblico del Ãrea Metropolitana de San Salvador (AMSS).

## ğŸ“ˆ ComparaciÃ³n: Antes vs Ahora

| CaracterÃ­stica | Base Original | Base Expandida | Incremento |
|----------------|---------------|----------------|------------|
| **Rutas** | 27 rutas | **80+ rutas** | +196% â¬†ï¸ |
| **Paradas** | 35 paradas | **150+ paradas** | +329% â¬†ï¸ |
| **Cobertura** | BÃ¡sica | Completa AMSS | Total âœ… |

## ğŸšŒ Rutas Incluidas

### Rutas Tradicionales (1-52)
- **Ruta 1**: Terminal Centro - Soyapango
- **Ruta 2**: Terminal Centro - Santa Tecla
- **Ruta 4**: Ilopango - Centro
- **Ruta 7-B**: Mejicanos - Santa Tecla
- **Ruta 8-A**: Terminal Del Sur - Canal 2
- **Ruta 9**: Terminal Oriente - Plaza Mundo
- **Ruta 11**: San Marcos - Metrocentro
- **Ruta 12**: Planes de Renderos - Centro
- **Ruta 16/16-A**: Ciudad Delgado - Centro/Metrocentro
- **Ruta 17**: Centro - Lourdes
- **Ruta 20**: Colonia Santa Rosa - Parque Infantil
- **Ruta 26**: Centro - Cuscatancingo
- **Ruta 29/29-C**: Santa Tecla - Soyapango/Ilopango
- **Ruta 30-A/B/C**: Soyapango - Centro/Metrocentro/Plaza Mundo
- **Ruta 34**: Apopa - Soyapango
- **Ruta 42**: Centro - San Marcos
- **Ruta 44/44-C**: Apopa - Centro/Metrocentro
- **Ruta 52/52-A**: Terminal Oriente - Hospital Rosales

### Rutas 101 (Todas las Variantes)
- **101-A**: Terminal Occidente - UES
- **101-B**: Metrocentro - UES
- **101-C**: Terminal Occidente - Hospital Rosales
- **101-D**: Santa Tecla - UES
- **101-A-1/A-2**: Colonia Las Delicias - San Salvador (variantes)
- **101-B-1/B-2**: Colonia Quezaltepec - San Salvador (variantes)

### Rutas Interdepartamentales (107-190)
- **107-B**: Hacienda Melara - Rosario de Mora - Planes
- **109**: Nejapa - Apopa - San Salvador
- **115/MB-115**: Tonacatepeque - Distrito Italia - Apopa - San Salvador
- **117/117-A/117-C**: El Paisnal/Aguilares - San Salvador
- **140 (todas variantes)**: San MartÃ­n - Soyapango - San Salvador
- **173**: Nejapa - San Salvador
- **190/190-A**: Tonacatepeque - San MartÃ­n

### Rutas VMT (R1-R24)
Sistema de transporte del Viceministerio de Transporte:
- **R1**: Mejicanos - Colonia Manzano
- **R2-A/R2-A-1**: Mejicanos - Barrio San JosÃ©
- **R2-B-1/R2-B-2**: Cuscatancingo - San Salvador
- **R2-C**: Mejicanos - Centro
- **R3**: Colonia Atlacatl - Sierra Morena
- **R5**: San Salvador - Cima 4
- **R8**: San Salvador - Colonia Dolores
- **R9-A**: Ciudad Credisa - 25 Avenida Norte
- **R16**: San Salvador - Villas de la EscalÃ³n
- **R22**: Colonia Santa Carlota - El Progreso
- **R23-A/R23-B**: Zaporte Arriba - San Salvador
- **R24**: Reparto Santa Margarita - Parque Infantil

### Microbuses (MB-2 a MB-44)
Sistema de microbuses urbanos:
- **MB-2-A**: Colonia Los Conacastes - Alameda Juan Pablo II
- **MB-3**: Colonia Sierra Morena - 23Âª Avenida Norte
- **MB-4/MB-4-T/MB-4-A**: Varias colonias Ciudad Delgado
- **MB-5/MB-5-1**: Colonias La Cima y Montecristo
- **MB-6-A/MB-6-C-F/MB-6-V-H**: Varias colonias Cuscatancingo
- **MB-44**: SantÃ­sima Trinidad - Santa Elena

## ğŸ“ Paradas EstratÃ©gicas

### Zonas de Cobertura

#### Centro HistÃ³rico
- Terminal Centro
- Catedral Metropolitana
- Teatro Nacional
- Mercado Central
- Palacio Nacional
- Parque Infantil
- Reloj de Flores

#### Zona Comercial
- Metrocentro
- Plaza Mundo
- Multiplaza
- Zona Rosa
- GalerÃ­as EscalÃ³n
- Canal 2
- Mercado Modelo

#### Zona Hospitalaria
- Hospital Rosales
- Hospital Bloom
- Hospital Militar
- Hospital de la Mujer

#### Zona Universitaria
- Universidad de El Salvador (UES)
- Universidad Centroamericana (UCA)
- Universidad Don Bosco (UDB)
- Universidad Francisco Gavidia (UFG)

#### Terminales de Buses
- Terminal Centro
- Terminal de Occidente
- Terminal de Oriente
- Terminal Soyapango
- Terminal Santa Tecla
- Terminal Del Sur

#### Municipios
**Mejicanos** (7 paradas):
- Mejicanos Centro
- Parque San JosÃ©
- Colonia 10 de Octubre
- Colonia Buena Vista
- San Jacinto
- Colonia Manzano
- Colonia Costa Rica

**Soyapango** (7 paradas):
- Terminal Soyapango
- Soyapango Plaza
- Colonia San Bartolo
- Colonia Sierra Morena
- Colonia Atlacatl
- Colonia Las Brisas
- Ciudad Credisa
- Unicentro Soyapango

**Ciudad Delgado** (4 paradas):
- Ciudad Delgado Centro
- Colonia Las Colinas
- Colonia Guardado
- Colonia Santa AlegrÃ­a

**Cuscatancingo** (7 paradas):
- Cuscatancingo Centro
- Colonia Santa Rosa
- Colonia Vista Hermosa
- Reparto Santa Margarita
- SantÃ­sima Trinidad
- Zacamil
- Colonia America

**Apopa**:
- Apopa Centro
- Distrito Italia

**Santa Tecla**:
- Santa Tecla Centro
- Santa Tecla Norte
- Terminal Santa Tecla

**Antiguo CuscatlÃ¡n**:
- Antiguo CuscatlÃ¡n
- Santa Elena

**Otros Municipios**:
- Ilopango Centro
- Tonacatepeque
- Nejapa
- Aguilares
- San MartÃ­n
- San Marcos
- San Pedro
- Ayutuxtepeque

## ğŸ¯ Sistema de RecomendaciÃ³n Inteligente

### CaracterÃ­sticas

#### 1. **BÃºsqueda por Proximidad**
El sistema automÃ¡ticamente encuentra paradas cercanas a tu ubicaciÃ³n:
```javascript
// Ejemplo de uso
GET /api/paradas-cercanas?lat=13.6929&lng=-89.2182&radio=500
```
- Radio de bÃºsqueda configurable (default: 500 metros)
- Ordenadas por distancia
- Incluye informaciÃ³n de accesibilidad

#### 2. **RecomendaciÃ³n de Rutas**
Algoritmo inteligente que:
- âœ… Encuentra rutas **directas** (sin transbordo)
- âœ… Calcula rutas **con 1 transbordo** si no hay directas
- âœ… Considera **tiempo estimado** de viaje
- âœ… Muestra **distancia de caminata** desde/hacia paradas
- âœ… Calcula **tarifa total** del viaje
- âœ… Ordena por **eficiencia** (tiempo + costo)

```javascript
// Ejemplo de uso
POST /api/recomendar-ruta
{
  "inicioLat": 13.6929,
  "inicioLng": -89.2182,
  "destinoLat": 13.7108,
  "destinoLng": -89.1394,
  "radio": 500
}
```

#### 3. **MÃ©tricas Incluidas**
Para cada recomendaciÃ³n:
- ğŸ• Tiempo estimado total
- ğŸ’° Tarifa total
- ğŸš¶ Distancia de caminata (origen y destino)
- ğŸš NÃºmero de paradas
- ğŸ”„ NÃºmero de transbordos
- ğŸ“ Paradas intermedias completas

## ğŸ“± CÃ³mo Usar

### Paso 1: Importar Datos Expandidos

```bash
# Desde la carpeta server/
node import-expanded-data.js
```

### Paso 2: Verificar ImportaciÃ³n

El script mostrarÃ¡:
```
âœ… IMPORTACIÃ“N EXPANDIDA COMPLETADA EXITOSAMENTE
   ğŸšŒ Rutas: 80+
   ğŸ“ Paradas: 150+
   ğŸ”— Conexiones: XXX
```

### Paso 3: Usar en la AplicaciÃ³n

La aplicaciÃ³n automÃ¡ticamente:
1. **Detecta tu ubicaciÃ³n** (si lo permites)
2. **Busca paradas cercanas** (radio de 500m)
3. **Recomienda las mejores rutas** segÃºn:
   - Menor tiempo de viaje
   - Menor distancia de caminata
   - Menor nÃºmero de transbordos
   - Menor costo

## ğŸ”„ ActualizaciÃ³n de Datos

### Agregar Nuevas Rutas

Edita `server/import-expanded-data.js`:

```javascript
{
  numero_ruta: 'NUEVA',
  nombre: 'Ruta Nueva',
  descripcion: 'DescripciÃ³n detallada',
  empresa: 'Empresa Operadora',
  tipo: 'Bus', // o 'Microbus'
  tarifa: 0.25,
  color: '#FF6B6B',
  horario_inicio: '05:00:00',
  horario_fin: '21:00:00',
  frecuencia_minutos: 10
}
```

### Agregar Nuevas Paradas

```javascript
{
  codigo: 'NUEVO-001',
  nombre: 'Parada Nueva',
  direccion: 'DirecciÃ³n completa',
  lat: 13.XXXX,
  lng: -89.XXXX,
  zona: 'Municipio',
  tipo: 'Regular', // o 'Terminal', 'TransferHub'
  tiene_techo: true,
  tiene_asientos: true,
  accesible: true
}
```

### Relacionar Rutas con Paradas

```javascript
'CODIGO_RUTA': [
  { parada: 'CODIGO_PARADA', orden: 1, tiempo: 0 },
  { parada: 'CODIGO_PARADA_2', orden: 2, tiempo: 5 },
  // ...
]
```

## ğŸŒ Fuentes de Datos

Los datos provienen de fuentes oficiales:

1. **VMT (Viceministerio de Transporte)**
   - ğŸ”— https://www.vmt.gob.sv
   - 46 rutas oficiales
   - 1244 paradas registradas

2. **bus.sv**
   - ğŸ”— https://bus.sv
   - InformaciÃ³n de rutas interdepartamentales
   - Horarios y recorridos

3. **Moovit**
   - ğŸ”— https://moovitapp.com
   - Datos de frecuencias y tiempos estimados

4. **Alfa Geomatics**
   - Datos geoespaciales del AMSS
   - Coordenadas GPS verificadas

## ğŸ¨ CaracterÃ­sticas Visuales

### CÃ³digos de Color por Tipo de Parada

- ğŸŸ¢ **Verde** (#22c55e): Terminales
- ğŸ”µ **Azul** (#3b82f6): TransferHub (hubs de transferencia)
- ğŸŸ  **Naranja** (#f59e0b): Paradas regulares

### InformaciÃ³n de Accesibilidad

Cada parada incluye:
- â˜‚ï¸ **tiene_techo**: ProtecciÃ³n contra lluvia
- ğŸ’º **tiene_asientos**: Bancas disponibles
- â™¿ **accesible**: Acceso para personas con movilidad reducida

## ğŸš€ PrÃ³ximas Mejoras

### En Desarrollo
- [ ] Rutas en tiempo real con GPS de buses
- [ ] Notificaciones de llegada de buses
- [ ] IntegraciÃ³n con mapas offline
- [ ] Favoritos de usuario
- [ ] Historial de viajes

### Futuro
- [ ] Sistema de puntos y gamificaciÃ³n
- [ ] Reportes de usuarios sobre estado de buses
- [ ] IntegraciÃ³n con sistemas de pago
- [ ] App mÃ³vil nativa (iOS/Android)

## ğŸ“ Soporte

Para mÃ¡s informaciÃ³n o reportar problemas:
- ğŸ“§ Email: soporte@bustracksv.com
- ğŸ› Issues: GitHub Issues
- ğŸ“± Twitter: @BusTrackSV

## ğŸ“„ Licencia

Datos bajo licencia del Gobierno de El Salvador.
AplicaciÃ³n desarrollada para fines educativos y de servicio pÃºblico.

---

**Ãšltima actualizaciÃ³n**: Octubre 2024
**VersiÃ³n**: 2.0 - Base Expandida

